<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Verdaccio 5 migration guidelines · Verdaccio</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="**Verdaccio 5** will introduce a few breaking changes, either way the migration should be light for the most of the users, here the big details."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Verdaccio 5 migration guidelines · Verdaccio"/><meta property="og:type" content="website"/><meta property="og:url" content="https://verdaccio.org//blog/2021/04/14/verdaccio-5-migration-guide"/><meta property="og:description" content="**Verdaccio 5** will introduce a few breaking changes, either way the migration should be light for the most of the users, here the big details."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://verdaccio.org/blog/atom.xml" title="Verdaccio Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://verdaccio.org/blog/feed.xml" title="Verdaccio Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-2527438-21', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script><script type="text/javascript" src="https://browser.sentry-cdn.com/5.15.5/bundle.min.js"></script><script type="text/javascript" src="/js/error.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/tagManager.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><script type="text/javascript" src="/js/talk.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/logo/symbol/svg/verdaccio-tiny.svg" alt="Verdaccio"/><h2 class="headerTitleWithLogo">Verdaccio</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/en/installation" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://twitter.com/verdaccio_npm" target="_self">Twitter</a></li><li class=""><a href="/en/help" target="_self">Help</a></li><li class=""><a href="https://github.com/verdaccio" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/en/contributors" target="_self">Contributors</a></li><li class=""><a href="https://opencollective.com/verdaccio" target="_self">Sponsor Us</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/es-ES">Español</a></li><li><a href="/fr-FR">Français</a></li><li><a href="/zh-CN">中文</a></li><li><a href="/ru-RU">Russian</a></li><li><a href="/yo-NG">Yoruba</a></li><li><a href="https://translate.verdaccio.org" target="_blank" rel="noreferrer noopener">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>All Blog Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">All Blog Posts</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2021/04/14/verdaccio-5-migration-guide">Verdaccio 5 migration guidelines</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/10/05/verdaccio-4-with-ldap-and-docker">Upgrade from v3.x to verdaccio 4.x with LDAP and Docker</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/09/30/verdaccio-430-release">Release 4.3.0</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/09/07/managing-multiples-projects-with-lerna-and-yarn-workspaces">Managing multiples projects with Lerna and Yarn Workspaces</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/07/30/verdaccio-420-release">Release 4.2.0</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/07/08/verdaccio-410-release">Release 4.1.0</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/05/19/15-verdaccio-4-release">Verdaccio 4 released !!!</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/05/13/the-new-docker-image-verdaccio-4">The new Docker image for Verdaccio 4</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/04/19/diving-into-jwt-support-for-verdaccio-4">Diving into JWT support for Verdaccio 4</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/02/24/migrating-verdaccio">Verdaccio Migration Guides</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/02/08/the-crazy-story-of-verdaccio">The crazy story of Verdaccio</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/11/19/setting-up-verdaccio-on-digitalocean">Setting up Verdaccio on DigitalOcean</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/10/21/verdaccio-4-alpha-release">Verdaccio 4 alpha release</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/09/06/verdaccio-and-deterministic-lock-files">Verdaccio and deterministic lock files</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2021/04/14/verdaccio-5-migration-guide">Verdaccio 5 migration guidelines</a></h1><p class="post-meta">April 14, 2021</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/jotadeveloper" target="_blank" rel="noreferrer noopener">Juan Picado</a></p><div class="authorPhoto"><a href="https://twitter.com/jotadeveloper" target="_blank" rel="noreferrer noopener"><img src="https://graph.facebook.com/1122901551/picture/?height=200&amp;width=200" alt="Juan Picado"/></a></div></div></header><div><span><p><strong>Verdaccio 5</strong> will introduce a few breaking changes, either way the migration should be light for the most of the users, here the big details.</p>
<h1><a class="anchor" aria-hidden="true" id="nodejs-requirements"></a><a href="#nodejs-requirements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Node.js requirements</h1>
<p>The latest Node.js v12 is required to run verdaccio. The upgrade only affects those are not using the Docker.</p>
<blockquote>
<p>Verdaccio goes hand to hand with the official Node.js releases roadmap.</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/nodejs/Release/master/schedule.svg?sanitize=true" alt="noderelease"></p>
<p>We recommend, always try to use the latest LTS version to avoid next major forces you to upgrade Node.js again.</p>
<h1><a class="anchor" aria-hidden="true" id="pinojs-is-the-new-logger"></a><a href="#pinojs-is-the-new-logger" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pino.js is the new logger</h1>
<p>Verdaccio replaces Bunyan by <a href="https://github.com/pinojs/pino">Pino.js</a> as logger, with the objective to improve the performance and delegate some features to the external tools. The new logger configuration does not support multiple streams, thus the configuration must contain one single object.</p>
<h3><a class="anchor" aria-hidden="true" id="pretty-loggin"></a><a href="#pretty-loggin" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pretty loggin</h3>
<p>Verdaccio logging pretty print is a distinguished feature the very first time <code>verdaccio</code> commands runs.</p>
<pre><code class="hljs"> http &lt;-- <span class="hljs-number">200</span>, user: test(<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>), req: <span class="hljs-string">'GET /is-accessor-descriptor/-/is-accessor-descriptor-1.0.0.tgz'</span>, bytes: <span class="hljs-number">0</span>/<span class="hljs-number">3250</span>
 http &lt;-- <span class="hljs-number">200</span>, user: test(<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>), req: <span class="hljs-string">'GET /extend-shallow/-/extend-shallow-3.0.2.tgz'</span>, bytes: <span class="hljs-number">0</span>/<span class="hljs-number">3210</span>
 http &lt;-- <span class="hljs-number">200</span>, user: test(<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>), req: <span class="hljs-string">'GET /define-property/-/define-property-2.0.2.tgz'</span>, bytes: <span class="hljs-number">0</span>/<span class="hljs-number">4047</span>
 http &lt;-- <span class="hljs-number">200</span>, user: test(<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>), req: <span class="hljs-string">'GET /mute-stream/-/mute-stream-0.0.8.tgz'</span>, bytes: <span class="hljs-number">0</span>/<span class="hljs-number">2663</span>
 http &lt;-- <span class="hljs-number">200</span>, user: test(<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>), req: <span class="hljs-string">'GET /ms/-/ms-2.1.2.tgz'</span>, bytes: <span class="hljs-number">0</span>/<span class="hljs-number">3017</span>
 http &lt;-- <span class="hljs-number">200</span>, user: test(<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>), req: <span class="hljs-string">'GET /mkdirp/-/mkdirp-0.5.1.tgz'</span>, bytes: <span class="hljs-number">0</span>/<span class="hljs-number">4991</span>
</code></pre>
<p>But is expensive in and not recommended to using in production environment, thus, if the environment variable <code>NODE_ENV=production</code> is detected, it will fall back automatically to <code>json</code> format.</p>
<p>One tecnical reasons is that <code>pino.final</code> <a href="https://github.com/pinojs/pino-pretty/issues/37">does not work with prettier option</a>.</p>
<p>To improve the performance of your registry, always use <code>format: json</code> in production.</p>
<h3><a class="anchor" aria-hidden="true" id="multiple-streams"></a><a href="#multiple-streams" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple streams</h3>
<p>Even if is <a href="https://getpino.io/#/docs/help?id=log-to-different-streams">supported by Pino.js</a> is not recommended for performance reasons. The log property only recognize one single option. If you were using this feature and want it back, <a href="https://github.com/verdaccio/verdaccio/discussions/new?category=ideas">feel free to open a discussion</a> or contribute as opt-in feature.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">logs:</span> <span class="hljs-string">{</span> <span class="hljs-attr">type:</span> <span class="hljs-string">stdout,</span> <span class="hljs-attr">format:</span> <span class="hljs-string">pretty,</span> <span class="hljs-attr">level:</span> <span class="hljs-string">http</span> <span class="hljs-string">}</span>
</code></pre>
<blockquote>
<p>FYI: pino v7 might bring back a good performant multi-streams support, this feature might be restored in the future.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="rotating-file-is-not-longer-supported"></a><a href="#rotating-file-is-not-longer-supported" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rotating file is not longer supported</h3>
<p>Pino.js does not support log rotation, thus if you were using this feature is recommended use an <a href="https://getpino.io/#/docs/help?id=log-rotation">external tool</a>.</p>
<pre><code class="hljs"> // this <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> longer <span class="hljs-keyword">valid</span>
 {<span class="hljs-keyword">type</span>: rotating-file, <span class="hljs-keyword">format</span>: <span class="hljs-type">json</span>, <span class="hljs-type">path</span>: /<span class="hljs-type">path</span>/<span class="hljs-keyword">to</span>/<span class="hljs-keyword">log</span>.jsonl, <span class="hljs-keyword">level</span>: http, <span class="hljs-keyword">options</span>: {period: <span class="hljs-number">1</span>d}}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="deprecation"></a><a href="#deprecation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deprecation</h3>
<p><strong>Old configuration won't crash the application</strong>, rather will display a deprecation warning and will use the very first option in your configuration as fallback. Consider update your configuration due in the next major will throw an error.</p>
<pre><code class="hljs css language-bash">➜  verdaccio
 warn --- config file  - /home/xxxx/.config/verdaccio/config.yaml
(node:22047) Warning: deprecate: multiple logger configuration is deprecated, please check the migration guide.
(Use `node --trace-warnings ...` to show <span class="hljs-built_in">where</span> the warning was created)
 warn --- Plugin successfully loaded: verdaccio-htpasswd
 warn --- Plugin successfully loaded: verdaccio-audit
 warn --- http address - http://localhost:4873/ - verdaccio/5.0.0-alpha.0
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="npm-token"></a><a href="#npm-token" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>npm token</code></h2>
<p>The command <code>npm token</code> has been an experiment in Verdaccio 4 and on this major release is enabled by default, but was based on <em>LevelDB</em> which requires a C and Python compiler on install to make it work. By <a href="https://github.com/verdaccio/verdaccio/issues/1925">request</a> has been removed and replaced by a pure JS solution.</p>
<p>The default token database now is plain json file <code>.token-db.json</code> and is located in the same directory as <code>.verdaccio-db.json</code>, with this format:</p>
<pre><code class="hljs">{
  <span class="hljs-attr">"jpicado"</span>: [
    {
      <span class="hljs-attr">"user"</span>: <span class="hljs-string">"jpicado"</span>,
      <span class="hljs-attr">"token"</span>: <span class="hljs-string">"MWFlM...yZDBl"</span>,
      <span class="hljs-attr">"key"</span>: <span class="hljs-string">"4201e4bc47c31b3434034e40b5c35175"</span>,
      <span class="hljs-attr">"cidr"</span>: [],
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"created"</span>: <span class="hljs-number">1609512433710</span>
    },
    {
      <span class="hljs-attr">"user"</span>: <span class="hljs-string">"jpicado"</span>,
      <span class="hljs-attr">"token"</span>: <span class="hljs-string">"ZjQwZ...wYTE1"</span>,
      <span class="hljs-attr">"key"</span>: <span class="hljs-string">"cc249bc2f4d248308733d70291acdc2a"</span>,
      <span class="hljs-attr">"cidr"</span>: [],
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"created"</span>: <span class="hljs-number">1609512441024</span>
    }
  ],
  <span class="hljs-attr">"test"</span>: [
    {
      <span class="hljs-attr">"user"</span>: <span class="hljs-string">"test"</span>,
      <span class="hljs-attr">"token"</span>: <span class="hljs-string">"M2RiM...0Mzhj"</span>,
      <span class="hljs-attr">"key"</span>: <span class="hljs-string">"2ae85deba977e00fb099d323173c925a"</span>,
      <span class="hljs-attr">"cidr"</span>: [],
      <span class="hljs-attr">"readonly"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"created"</span>: <span class="hljs-number">1609533131779</span>
    }
  ]
}

</code></pre>
<p>Tokens are not being storage, just small part of it, the <code>key</code> is just a random <code>uuid</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="breaking-changes"></a><a href="#breaking-changes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breaking Changes</h3>
<p>If you were using <code>npm token</code> in verdaccio 4, most likely the database would need to be removed and created from scratch. Remove the old database and on restart Verdaccio will generate a new one.</p>
<h2><a class="anchor" aria-hidden="true" id="url_prefix-improved-behavior"></a><a href="#url_prefix-improved-behavior" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>url_prefix</code> improved behavior</h2>
<p>The new internal logic builds correctly the public url, validates the <code>host</code> header and and bad shaped <code>url_prefix</code>.</p>
<p>eg: <code>url_prefix: /verdaccio</code>, <code>url_prefix: verdaccio/</code>, <code>url_prefix: verdaccio</code> would be <code>/verdaccio/</code></p>
<h3><a class="anchor" aria-hidden="true" id="a-new-public-url-environment-variable"></a><a href="#a-new-public-url-environment-variable" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A new public url environment variable</h3>
<p>The new <code>VERDACCIO_PUBLIC_URL</code> is intended to be used behind proxies, this variable will be used for:</p>
<ul>
<li>Used as base path to serve UI resources as (js, favicon, etc)</li>
<li>Used on return metadata <code>dist</code> base path</li>
<li>Ignores <code>host</code> and <code>X-Forwarded-Proto</code> headers</li>
<li>If <code>url_prefix</code> is defined would be appened to the env variable.</li>
</ul>
<pre><code class="hljs">VERDACCIO_PUBLIC_URL=<span class="hljs-string">'https://somedomain.org'</span>;
<span class="hljs-symbol">url_prefix:</span> <span class="hljs-string">'/my_prefix'</span>

/<span class="hljs-regexp">/ url -&gt; https:/</span><span class="hljs-regexp">/somedomain.org/my</span>_prefix/

VERDACCIO_PUBLIC_URL=<span class="hljs-string">'https://somedomain.org'</span>;
<span class="hljs-symbol">url_prefix:</span> <span class="hljs-string">'/'</span>

/<span class="hljs-regexp">/ url -&gt; https:/</span><span class="hljs-regexp">/somedomain.org/</span>

VERDACCIO_PUBLIC_URL=<span class="hljs-string">'https://somedomain.org/first_prefix'</span>;
<span class="hljs-symbol">url_prefix:</span> <span class="hljs-string">'/second_prefix'</span>

/<span class="hljs-regexp">/ url -&gt; https:/</span><span class="hljs-regexp">/somedomain.org/second</span>_prefix/<span class="hljs-string">'
</span></code></pre>
<p><img src="https://user-images.githubusercontent.com/558752/112371003-5fa1ce00-8cde-11eb-888c-70c4e9776c57.png" alt="Screenshot from 2021-03-24 20-20-11"></p>
<h2><a class="anchor" aria-hidden="true" id="custom-favicon-the-new-webfavicon-property"></a><a href="#custom-favicon-the-new-webfavicon-property" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom favicon, the new <code>web.favicon</code> property</h2>
<p>The <em>favicon</em> can be set either as url or absolute path in your system.</p>
<h3><a class="anchor" aria-hidden="true" id="local-absolute-path"></a><a href="#local-absolute-path" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local absolute path</h3>
<pre><code class="hljs"><span class="hljs-symbol">web:</span>
<span class="hljs-symbol">  title:</span> Verdaccio
<span class="hljs-symbol">  favicon:</span> <span class="hljs-meta-keyword">/home/</span>user/favicon.ico
</code></pre>
<p>Ensure the same user that runs the server also has permissions to access the resource you define here.</p>
<h3><a class="anchor" aria-hidden="true" id="by-url"></a><a href="#by-url" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>By URL</h3>
<pre><code class="hljs"><span class="hljs-attribute">web</span>:
  <span class="hljs-attribute">title</span>: Verdaccio
  <span class="hljs-attribute">favicon</span>: <span class="hljs-attribute">https</span>:<span class="hljs-comment">//somedomain.org/favicon.ico</span>
</code></pre>
<p>If the logo is not defined, will fetch (and bundled in) the custom verdaccio favicon</p>
<h2><a class="anchor" aria-hidden="true" id="ui-changes-to-consider"></a><a href="#ui-changes-to-consider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UI changes to consider</h2>
<p>The new UI may looks the same, but under the hood has consideriable changes:</p>
<ul>
<li>Does not contain any CSS, SVG or Fonts anymore: The UI is JS 100% based.</li>
<li>It uses emotion and <code>&lt;styles&gt;</code> are generated on runtime by JS.</li>
<li>Fonts now depends of your system, by default define a set of the most common ones.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="web-new-properties-for-dynamic-template"></a><a href="#web-new-properties-for-dynamic-template" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Web new properties for dynamic template</h2>
<p>The new set of properties are made in order allow inject <em>html</em> and <em>JavaScript</em> scripts within the template. This
might be useful for scenarios like Google Analytics scripts or custom html in any part of the body.</p>
<ul>
<li>metaScripts: html injected before close the <code>head</code> element.</li>
<li>scriptsbodyBefore: html injected before close the <code>body</code> element.</li>
<li>scriptsBodyAfter: html injected after <em>verdaccio</em> JS scripts.</li>
</ul>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">web:</span>
  <span class="hljs-attr">scriptsBodyAfter:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'&lt;script type="text/javascript" src="https://my.company.com/customJS.min.js"&gt;&lt;/script&gt;'</span>
  <span class="hljs-attr">metaScripts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'&lt;script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"&gt;&lt;/script&gt;'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'&lt;script type="text/javascript" src="https://browser.sentry-cdn.com/5.15.5/bundle.min.js"&gt;&lt;/script&gt;'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'&lt;meta name="robots" content="noindex" /&gt;'</span>
  <span class="hljs-attr">scriptsbodyBefore:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'&lt;div id="myId"&gt;html before webpack scripts&lt;/div&gt;'</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="ui-custom-plugins-themes"></a><a href="#ui-custom-plugins-themes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UI custom plugins themes</h3>
<p>If you have a custom UI plugin for the them you will need to adapt your build to the new requirements.</p>
<p>The previous version you only need to return a function with a string and the path of the directory.</p>
<pre><code class="hljs">const path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> path.join(__dirname, <span class="hljs-string">'static'</span>);
};
</code></pre>
<p>Since Verdaccio 5 the module must return an object and the <code>index.html</code> is ignored since support dynamic rendering, eg:</p>
<pre><code class="hljs">  staticPath: '/somePath/node_modules/verdaccio-theme-custom/static',
  manifest: {
    'main.js': '-/static/main.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'runtime.js': '-/static/runtime.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'NotFound.js': '-/static/NotFound.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Provider.js': '-/static/Provider.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Version.js': '-/static/Version.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Home.js': '-/static/Home.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Versions.js': '-/static/Versions.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'UpLinks.js': '-/static/UpLinks.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Dependencies.js': '-/static/Dependencies.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Engines.js': '-/static/Engines.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Dist.js': '-/static/Dist.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Install.js': '-/static/Install.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'Repository.js': '-/static/Repository.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    'vendors.js': '-/static/vendors.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    '718.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js': '-/static/718.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    '238.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js': '-/static/238.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js',
    '73.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js': '-/static/73.c21a97b1dbe<span class="hljs-number">8456</span>a9c76.js'
  },
  manifestFiles: { js: [ 'runtime.js', 'vendors.js', 'main.js' ] }
</code></pre>
<ul>
<li><code>staticPath</code>: is the same data returned in Verdaccio 4.</li>
<li><code>manifest</code>: A webpack manifest object.</li>
<li><code>manifestFiles</code>: A object with one property <code>js</code> and the array (order matters) of the manifest id to be loaded in the template dynamically.</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="manifest-and-webpack"></a><a href="#manifest-and-webpack" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Manifest and Webpack</h4>
<p>Verdaccio uses the webpack <a href="https://webpack.js.org/concepts/manifest/">manifest</a> object to render the html dynamically, in combination with the <code>manifestFiles</code> the application understand what to render.</p>
<blockquote>
<p>Currently only support <code>js</code> but if you also need <code>css</code>, we are open to discuss it and further improvements.</p>
</blockquote>
<pre><code class="hljs">const { WebpackManifestPlugin } = <span class="hljs-keyword">require</span>(<span class="hljs-string">'webpack-manifest-plugin'</span>);

  plugins: <span class="hljs-meta">[</span>
    <span class="hljs-params">...</span>
    <span class="hljs-literal">new</span> WebpackManifestPlugin({
      removeKeyHash: <span class="hljs-literal">true</span>,
    }),
    <span class="hljs-params">...</span>
  <span class="hljs-meta">]</span>,

</code></pre>
<h1><a class="anchor" aria-hidden="true" id="troubleshooting"></a><a href="#troubleshooting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Troubleshooting</h1>
<h3><a class="anchor" aria-hidden="true" id="after-upgrade-i-dont-see-packages-on-the-ui"></a><a href="#after-upgrade-i-dont-see-packages-on-the-ui" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>After upgrade I don't see packages on the UI</h3>
<p>This migth be the storage is not being located, if you are using this format in your <code>config.yaml</code></p>
<pre><code class="hljs"><span class="hljs-keyword">storage</span>: ./<span class="hljs-keyword">storage</span>
</code></pre>
<p>Use an absolute path instead, more info <a href="https://github.com/verdaccio/verdaccio/issues/2204">here</a>.</p>
</span></div></div><div class="blogSocialSection"><div class="blogSocialSectionItem"><a href="https://twitter.com/share" class="twitter-share-button" data-text="Verdaccio 5 migration guidelines" data-url="https://verdaccio.org//blog/2021/04/14/verdaccio-5-migration-guide" data-related="true" data-show-count="false">Tweet</a></div></div></div><div class="blog-recent"><a class="button" href="/blog/">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#npm-token"><code>npm token</code></a><ul class="toc-headings"><li><a href="#breaking-changes">Breaking Changes</a></li></ul></li><li><a href="#url_prefix-improved-behavior"><code>url_prefix</code> improved behavior</a><ul class="toc-headings"><li><a href="#a-new-public-url-environment-variable">A new public url environment variable</a></li></ul></li><li><a href="#custom-favicon-the-new-webfavicon-property">Custom favicon, the new <code>web.favicon</code> property</a><ul class="toc-headings"><li><a href="#local-absolute-path">Local absolute path</a></li><li><a href="#by-url">By URL</a></li></ul></li><li><a href="#ui-changes-to-consider">UI changes to consider</a></li><li><a href="#web-new-properties-for-dynamic-template">Web new properties for dynamic template</a><ul class="toc-headings"><li><a href="#ui-custom-plugins-themes">UI custom plugins themes</a></li><li><a href="#after-upgrade-i-dont-see-packages-on-the-ui">After upgrade I don't see packages on the UI</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo/symbol/svg/verdaccio-blackwhite.svg" alt="Verdaccio" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/what-is-verdaccio.html">Getting Started</a><a href="/docs/en/docker.html">Docker</a><a href="/docs/en/configuration.html">Configuration</a><a href="/docs/en/logo">Logos</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="https://stackoverflow.com/search?q=verdaccio" target="_blank">Stack Overflow</a><a href="http://chat.verdaccio.org" target="_blank">Project Chat</a><a href="https://twitter.com/verdaccio_npm" target="_blank"><img alt="Follow Verdaccio on Twitter" src="https://img.shields.io/twitter/follow/verdaccio_npm.svg?label=Follow+Verdaccio&amp;style=social"/></a></div><div><h5>More</h5><a href="https://medium.com/verdaccio" target="_blank">Blog</a><a href="https://github.com/verdaccio" target="_blank">GitHub</a><a class="github-button" href="https://github.com/verdaccio/verdaccio" data-icon="octicon-star" data-count-href="/verdaccio/verdaccio/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'a8b4d117e513cd8d71d6a95e3d9d4a91',
                indexName: 'verdaccio',
                inputSelector: '#search_input_react'
              });
            </script></body></html>