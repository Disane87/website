<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Best Practices · Verdaccio</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The following guide is a list of the best practices collected and that we usually recommend to all users. Do not take this guide as mandatory, you might pick some of them according your needs."/><meta name="docsearch:language" content="zh-CN"/><meta property="og:title" content="Best Practices · Verdaccio"/><meta property="og:type" content="website"/><meta property="og:url" content="https://verdaccio.org//"/><meta property="og:description" content="The following guide is a list of the best practices collected and that we usually recommend to all users. Do not take this guide as mandatory, you might pick some of them according your needs."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="alternate" type="application/atom+xml" href="https://verdaccio.org/blog/atom.xml" title="Verdaccio Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://verdaccio.org/blog/feed.xml" title="Verdaccio Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-2527438-21', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code-blocks-buttons.css"/><script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script><script type="text/javascript" src="https://browser.sentry-cdn.com/5.15.5/bundle.min.js"></script><script type="text/javascript" src="/js/error.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/tagManager.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/zh-CN"><img class="logo" src="/img/logo/symbol/svg/verdaccio-tiny.svg" alt="Verdaccio"/><h2 class="headerTitleWithLogo">Verdaccio</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/zh-CN/installation" target="_self">Docs</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><li class=""><a href="https://twitter.com/verdaccio_npm" target="_self">Twitter</a></li><li class=""><a href="/zh-CN/help" target="_self">Help</a></li><li class=""><a href="https://github.com/verdaccio" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/zh-CN/team" target="_self">Team</a></li><li class=""><a href="https://opencollective.com/verdaccio" target="_self">支持我们</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>中文</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/best">English</a></li><li><a href="/docs/es-ES/best">Español</a></li><li><a href="/docs/fr-FR/best">Français</a></li><li><a href="/docs/ru-RU/best">Russian</a></li><li><a href="/docs/yo-NG/best">Yoruba</a></li><li><a href="https://translate.verdaccio.org" target="_blank" rel="noreferrer noopener">帮助翻译</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/what-is-verdaccio">Verdaccio是什么？</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/installation">安装</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/cli">命令行工具</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/cli-registry">Using a private registry</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/who-is-using">谁在使用 Verdaccio?</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/security-policy">Security Policy</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/logo">Logotype</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Uses Cases</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/e2e">End to End testing</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/caching">Caching strategies</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/github-actions">GitHub Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/linking-remote-registry">链接远程Registry</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Talks &amp; Articles</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/articles">Articles</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/talks">Talks</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Features<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/configuration">配置文件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/uplinks">上行链路</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/packages">包的访问</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/authentication">Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/notifications">通知</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/logger">记录器</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/webui">Web 用户界面</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Server<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/server-configuration">服务器配置</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/reverse-proxy">逆向代理服务器设置</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/ssl">设置SSL 证书</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/windows">作为 Windows 服务安装</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/iss-server">IIS server上进行安装</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/plugins">插件</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/dev-plugins">插件开发</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Dev Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/plugin-generator">Plugin Generator</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/plugin-auth">Authentication Plugin（认证插件）</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/plugin-middleware">Middleware Plugin（Middleware 插件）</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/plugin-storage">Storage Plugin（存储插件）</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/zh-CN/node-api">Node API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">DevOps<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/zh-CN/docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/kubernetes">Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/ci">持续集成</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Cloud</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/amazon">亚马逊Web服务</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tools</h4><ul><li class="navListItem"><a class="navItem" href="/docs/zh-CN/ansible">Ansible</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/puppet">Puppet</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/chef">Chef Cookbook</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guides<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/docs/zh-CN/best">Best Practices</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/protect-your-dependencies">保护包</a></li><li class="navListItem"><a class="navItem" href="/docs/zh-CN/aws">Amazon Web Services</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://translate.verdaccio.org/zh-CN" target="_blank" rel="noreferrer noopener">Translate</a><h1 id="__docusaurus" class="postHeaderTitle">Best Practices</h1></header><article><div><span><p>The following guide is a list of the best practices collected and that we usually recommend to all users. Do not take this guide as mandatory, you might pick some of them according your needs.</p>
<p><strong>Feel free to suggest your best practices to the Verdaccio community</strong>.</p>
<h2><a class="anchor" aria-hidden="true" id="private-registry"></a><a href="#private-registry" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Private Registry</h2>
<p>您可以添加用户并管理哪个用户可以访问哪个包。</p>
<p>It is recommended that you define a prefix for your private packages, for example <code>local-*</code> or scoped <code>@my-company/*</code>, so all your private things will look like this: <code>local-foo</code>. 通过这种方法您可以清楚地把公有包和私有包分开。</p>
<pre><code class="hljs">yaml
  packages:
    '@my-company/*':
      access: $all
      publish: $authenticated
     'local-*':
      access: $all
      publish: $authenticated
    '@*/*':
      access: $all
      publish: $authenticated
    '**':
      access: $all
      publish: $authenticated
</code></pre>
<p>Always remember, <strong>the order of packages access is important</strong>, packages are matched always top to bottom.</p>
<h3><a class="anchor" aria-hidden="true" id="从npmjsorg使用公有包"></a><a href="#从npmjsorg使用公有包" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>从npmjs.org使用公有包</h3>
<p>If a package doesn't exist in the storage, the server will try to fetch it from npmjs.org. If npmjs.org is down, it serves packages from the cache pretending that no other packages exist. <strong>Verdaccio will download only what's needed (requested by clients)</strong>, and this information will be cached, so if the client requests the same thing a second time it can be served without asking npmjs.org for it.</p>
<p><strong>Example:</strong></p>
<p>If you successfully request <code>express@4.0.1</code> from the server once, you'll be able to do it again (with all of it's dependencies) any time, even if npmjs.org is down. Though note that <code>express@4.0.0</code> will not be downloaded until it's actually needed by somebody. And if npmjs.org is offline, the server will say that only <code>express@4.0.1</code> (what's in the cache) is published, but nothing else.</p>
<h3><a class="anchor" aria-hidden="true" id="覆盖公共包"></a><a href="#覆盖公共包" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>覆盖公共包</h3>
<p>If you want to use a modified version of some public package <code>foo</code>, you can just publish it to your local server, so when your type <code>npm install foo</code>, <strong>it'll consider installing your version</strong>.</p>
<p>这里有两个选项：</p>
<ol>
<li><p>You want to create a separate <strong>fork</strong> and stop synchronizing with public version.</p>
<p>If you want to do that, you should modify your configuration file so Verdaccio won't make requests regarding this package to npmjs anymore. Add a separate entry for this package to <code>config.yaml</code> and remove <code>npmjs</code> from <code>proxy</code> list and restart the server.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">packages:</span>
  <span class="hljs-string">'@my-company/*'</span><span class="hljs-string">:</span>
    <span class="hljs-attr">access:</span> <span class="hljs-string">$all</span>
    <span class="hljs-attr">publish:</span> <span class="hljs-string">$authenticated</span>
    <span class="hljs-comment"># comment it out or leave it empty</span>
    <span class="hljs-comment"># proxy:</span>
</code></pre>
<p>When you publish your package locally, <strong>you should probably start with a version string higher than the existing package</strong> so it won't conflict with that package in the cache.</p></li>
<li><p>You want to temporarily use your version, but return to the public one as soon as it's updated.</p>
<p>In order to avoid version conflicts, <strong>you should use a custom pre-release suffix of the next patch version</strong>. For example, if a public package has version 0.1.2, you can upload <code>0.1.3-my-temp-fix</code>.</p>
<pre><code class="hljs css language-bash">npm version 0.1.3-my-temp-fix
npm publish --tag fix --registry http://localhost:4873
</code></pre>
<p>This way your package will be used until its original maintainer updates his public package to <code>0.1.3</code>.</p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="security"></a><a href="#security" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Security</h2>
<p>Security starts in your environment. For such things we recommend reading <strong><a href="https://snyk.io/blog/ten-npm-security-best-practices/">10 npm Security Best Practices</a></strong> and following the steps outlined there.</p>
<h3><a class="anchor" aria-hidden="true" id="包的访问"></a><a href="#包的访问" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>包的访问</h3>
<p>By default all packages you publish in Verdaccio are accessible for all users. We recommend protecting your registry from external non-authorized users by updating the <code>access</code> property of your packages to <code>$authenticated</code>.</p>
<pre><code class="hljs css language-yaml">  <span class="hljs-attr">packages:</span>
    <span class="hljs-string">'@my-company/*'</span><span class="hljs-string">:</span>
      <span class="hljs-attr">access:</span> <span class="hljs-string">$authenticated</span>
      <span class="hljs-attr">publish:</span> <span class="hljs-string">$authenticated</span>
    <span class="hljs-string">'@*/*'</span><span class="hljs-string">:</span>
      <span class="hljs-attr">access:</span> <span class="hljs-string">$authenticated</span>
      <span class="hljs-attr">publish:</span> <span class="hljs-string">$authenticated</span>
    <span class="hljs-string">'**'</span><span class="hljs-string">:</span>
      <span class="hljs-attr">access:</span> <span class="hljs-string">$authenticated</span>
      <span class="hljs-attr">publish:</span> <span class="hljs-string">$authenticated</span>
</code></pre>
<p>That way, <strong>nobody can access your registry unless they are authorized, and private packages won't be displayed in the web interface</strong>.</p>
<h2><a class="anchor" aria-hidden="true" id="server"></a><a href="#server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Server</h2>
<h3><a class="anchor" aria-hidden="true" id="secured-connections"></a><a href="#secured-connections" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Secured Connections</h3>
<p>Using <strong>HTTPS</strong> is a common recommendation. For this reason we recommend reading the <a href="/docs/zh-CN/ssl">SSL</a> section to make Verdaccio secure, or alternatively using an HTTPS <a href="/docs/zh-CN/reverse-proxy">reverse proxy</a> on top of Verdaccio.</p>
<h3><a class="anchor" aria-hidden="true" id="expiring-tokens"></a><a href="#expiring-tokens" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Expiring Tokens</h3>
<p>In <code>verdaccio@3.x</code> the tokens have no expiration date. For such reason we introduced in the next <code>verdaccio@4.x</code> the JWT feature <a href="https://github.com/verdaccio/verdaccio/pull/896">PR#896</a></p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">security:</span>
  <span class="hljs-attr">api:</span>
    <span class="hljs-attr">jwt:</span>
      <span class="hljs-attr">sign:</span>
        <span class="hljs-attr">expiresIn:</span> <span class="hljs-string">15d</span>
        <span class="hljs-attr">notBefore:</span> <span class="hljs-number">0</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">sign:</span>
      <span class="hljs-attr">expiresIn:</span> <span class="hljs-string">7d</span>
</code></pre>
<p><strong>Using this configuration will override the current system and you will be able to control how long the token will live</strong>.</p>
<p>Using JWT also improves the performance with authentication plugins. The old system will perform an unpackage and validate the credentials on every request, while JWT will rely on the token signature instead, avoiding the overhead for the plugin.</p>
<p>As a side note, at <strong>npmjs the token never expires</strong>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/zh-CN/chef"><span class="arrow-prev">← </span><span>Chef Cookbook</span></a><a class="docs-next button" href="/docs/zh-CN/protect-your-dependencies"><span>保护包</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#private-registry">Private Registry</a><ul class="toc-headings"><li><a href="#从npmjsorg使用公有包">从npmjs.org使用公有包</a></li><li><a href="#覆盖公共包">覆盖公共包</a></li></ul></li><li><a href="#security">Security</a><ul class="toc-headings"><li><a href="#包的访问">包的访问</a></li></ul></li><li><a href="#server">Server</a><ul class="toc-headings"><li><a href="#secured-connections">Secured Connections</a></li><li><a href="#expiring-tokens">Expiring Tokens</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo/symbol/svg/verdaccio-blackwhite.svg" alt="Verdaccio" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/zh-CN/what-is-verdaccio.html">Getting Started</a><a href="/docs/zh-CN/docker.html">Docker</a><a href="/docs/zh-CN/configuration.html">Configuration</a><a href="/docs/zh-CN/logo">Logos</a></div><div><h5>Community</h5><a href="/zh-CN/users.html">User Showcase</a><a href="https://stackoverflow.com/search?q=verdaccio" target="_blank">Stack Overflow</a><a href="http://chat.verdaccio.org" target="_blank">Project Chat</a><a href="https://twitter.com/verdaccio_npm" target="_blank"><img alt="Follow Verdaccio on Twitter" src="https://img.shields.io/twitter/follow/verdaccio_npm.svg?label=Follow+Verdaccio&amp;style=social"/></a></div><div><h5>More</h5><a href="https://medium.com/verdaccio" target="_blank">Blog</a><a href="https://github.com/verdaccio" target="_blank">GitHub</a><a class="github-button" href="https://github.com/verdaccio/verdaccio" data-icon="octicon-star" data-count-href="/verdaccio/verdaccio/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'a8b4d117e513cd8d71d6a95e3d9d4a91',
                indexName: 'verdaccio',
                inputSelector: '#search_input_react'
              });
            </script></body></html>